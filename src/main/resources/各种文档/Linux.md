## Linux命令行大全



### shell

> 当谈及命令行的时候，实际上指的是shell
>
> shell是一个接收输入的命令，并将其传递给操作系统来执行的程序
>
> shell程序来源于称之为bash的GUN项目，shell基于这样一个事实，即：bash是sh的增强版本，而sh是最初的Unix shell程序





### Linux系统



#### 查看文件内容命令

less



#### Linux目录系统

/ ：根目录，一起从这里开始

/bin：

/boot：包含Linux内核、启动加载程序

/dev：包含设备节点的特殊目录，设备也是作为一个文件存放在这个目录

/etc：包含所有系统层面的配置文件，同时也包含了一系列shell脚本，系统每次启动时，这些shell脚本都会打开每个系统服务。该目录中包含的内容都应该是可读的文本文件

/lib：包含核心系统程序使用的共享库文件

/media：目录包含可移除媒体设备的挂载点。比如USB驱动、CD-ROM等。这些设备在插入计算机后，会自动挂载到这个目录节点下

/mnt：早期的Linux系统中，手动挂载的可移除设备的挂载点

/opt：安装其他可选的软件，主要用来存放可能安装在系统中的商业软件

/proc：从文件的角度来说，它不是存储在硬盘中的真正的文件系统，反而是一个Linux内核维护的虚拟文件系统。它包含的文件是内核的窥视孔。该文件是可读的，从中可以看到内核是如何监管计算机的

/root：账户的主目录

/sbin：该目录放置"系统"二进制文件，这些任务通常是为超级用户预留的

/tmp：存放各类程序创建的临时文件的目录。某些配置使得每次系统重启时都会清空该目录

/usr：该目录可能是Linux系统中最大的目录树，它包含了普通用户使用的所有程序和相关文件

- unixt系统资源：Unix System resource

/var：除了/tmp和/home目录之外，目前看到的目录相对来说都是静态的；也就是说，其包含的内容是不变的。而那些可能改变的数据存储在/var目录树里。各种数据库、假脱机文件、用户邮件等都存储在这里



### 操作文件与目录

> 简单列举Linux最常使用的一些命令
>
> cp：复制文件和目录。
> mv：移动或重命名文件和目录。
> mkdir：创建目录。
> rm：移除文件和目录。
> in：创建硬链接和符号链接。



#### cp命令

1. cp sourceFile/dir  targetFile/dir
2. 将多个文件或目录复制进一个目录中



#### mv命令

和cp的使用方式类似，也是1、2两种方式



#### rm命令

> rm命令用来删除文件和目录

rf -r f  :递归删除目录，并忽略不存在的文件并无需提示确认





### 命令的使用

> type：说明如何解释命令名。
> which：显示可执行程序位置。
> man：显示命令的手册页。
> apropos：显示一系列合适的命令。
> info：显示命令的info条目。
> whatis：显示一条命令的简述。
> alias：创建一条命令的别名。



#### 获取命令文档

help：获得shell内部命令的帮助文档

~~~shell
help cd	
~~~



--help：显示命令的使用信息，当然有些命令是不支持这个命令的，不过我们尝试看有就按照提示来即可

~~~shell
mkdir --help

~~~



man：显示程序的手册页

~~~shell
man ls
~~~









### 重定向

> 重定向是把命令行的输入重定向为从文件中获取内容，或把命令行的输出重定向到文件中
>
> 将多个命令关联起来，形成非常强大的命令—管道
>
> cat：合并文件。
> sort：对文本行排序。
> uniq：报告或删除文件中重复的行。
> wc：打印文件中的换行符、字和字节的个数。
> grep：打印匹配行。
> head：输出文件的第一部分内容。
> tail：输出文件的最后一部分内容。
> tee：读取标准输入的数据，并将其内容输出到标准输出和文件中



将标准输出/错误重定向到一个文件

~~~shell
ls -l /bin/usr > ls-output.txt 2>&1
#将标准输出重定向到ls-output.txt文件中，同时把标准错误信息重定向到ls-output.txt中
#标记符2>&1  意思是：同时把文件描述符2(标准错误)重定向到文件描述符1(标准输出)中
~~~



gerp：功能强大，用于查找文件中匹配的文本

1. grep pattern[file]



head/tail

1. 打印文件的头、尾















### 进程

>ps：显示当前所有进程的运行情况。
>top：实时显示当前所有任务的资源占用情况。
>jobs：列出所有活动作业的状态信息。
>bg：设置在后台中运行作业。
>fg：设置在前台中运行作业。
>kill：发送信号给某个进程。
>killall：杀死指定名字的进程。
>shutdown：关机或者重启系统



kill

- kill -1：挂起信号
- kill -2：中断信号
- kill -9：杀死信号
- kill -15：终止信号
- kill -18：继续信号
- kill -19：暂停信号



### 权限

> id：显示用户身份标识。
> chmod：更改文件的模式。
> umask：设置文件的默认权限。
> su：以另一个用户的身份运行shell。
> sudo：以另一个用户的身份来执行命令。
> chown：更改文件所有者。
> chgrp：更改文件所属群组。
> passwd：更改用户密码







### 环境

>printenv：打印部分或全部的环境信息。
>set：设置shell选项。
>export：将环境导出到随后要运行的程序中。
>alias：为命令创建一个别名







### 软件包管理

> 决定Linux发行版本质量最重要的因素是：软件包系统和支持该发行版本社区的活力

因此，需要好的工具来进行软件包管理

软件包管理：是一种在系统上安装、维护软件的方法

#### 软件包系统

> 不同Linux发行版用的是不同的软件包系统，并且原则上，适用于一种发行版的软件包与其他版本是不兼容的

Debian类：dpkg  apt-get  aptitude

Red hat类：rpm yum 







### 存储介质

> mount：挂载文件系统。
> unmount：卸载文件系统。
> fdisk：硬盘分区命令。
> fsck：检查修复文件系统。
> fdformat：格式化软盘。
> mkf：创建文件系统。
> dd：向设备直接写入面向块数据。
> genisoimage（mkisofs）：创建一个ISO 9600映像文件。
> wodim（cdrecord）：向光存储介质写入数据。
> md5sum：计算MD5校验码







### 网络

> ping：向网络主机发送ICMP　ECHO_REQUEST数据包。
> traceroute：显示数据包到网络主机的路由路径。
> netstat：显示网络连接、路由表、网络接口数据、伪连接以及多点传送成员等信息。
> ftp：文件传输命令。
> lftp：改善后的文件传输命令。
> wget：非交互式网络下载器。
> ssh：OpenSSH（SSH协议的免费开源实现）版的SSH客户端（远程系统登录命令）。
> scp：secure copy 的缩写，是远程复制文件命令。
> sftp：secure file transfer program的缩写，安全文件传输程序





### 文件搜索

> locate：通过文件名查找文件。
> find：在文件系统目录框架中查找文件







### 归档和备份



#### 文件压缩程序

压缩是按照压缩算法将文件进行处理，以达到保留最大文件信息，而让文件体积变小

> gzip：压缩和解压缩文件工具。
> bzip2：块排序文件压缩工具

解压：

tar -xzvf  ：gzip压缩的

tar -xjvf：bzip压缩的



#### 文件归档程序

归档也叫打包，指的是：一个文件或目录的集合，而这个集合被存储在一个文件中

归档文件是没有压缩的，因此它占用的空间是所有文件和目录的总和

> tar：文件归档工具。
> zip：打包和压缩文件



其中，文件归档和压缩通常是配合使用的

归档类似于windows将多个文件放到一个文件夹里面



#### 文件同步程序

> rsync：远程文件和目录的同步







### Shell

> shell脚本是一个包含一系列命令的文件，shell读取这个文件，然后执行里面的一系列命令

shell很独特，它既是一个强大的命令行接口，也是一个脚本语言解释器



要成功运行一个shell脚本，需要做三件事情

1. 编写脚本
2. 使脚本可执行
3. 将脚本放置在shell能发现的位置





#### shell脚本的格式

文件头、注释、变量、命令、流程控制语句、函数

##### 文件头

~~~shell
#!/bin/bash   
#注意文件头的这个 #号 并不是注释，而是称为shebang行，用于告诉操作系统，该脚本应该用哪种解释器来执行
~~~



##### 变量

~~~shell
my_var="hello world"


#shell脚本中可以通过：$ 符号来引用变量的值
echo $my_var
~~~



##### 命令

shell中，命令可以是shell命令，或其他可执行程序，命令可以通过直接调用或使用变量调用

~~~shell
ls
echo "hello world2"
echo $my_var

#变量调用的语法为：$()
result_var=$(ls)
~~~



##### 流程控制语句

shell里面也是支持if、for、while等流程控制语言的

~~~shell
if[$my_var="hello"];then
	echo "my_var变量的值为：hello"
else 
	echo "my_var变量的值：不是hello"
fi
~~~



##### 函数

函数是shell脚本中可重复使用的代码块，函数的定义通过funtion关键字定义，也可以直接定义

~~~shell
function my_function(){
	echo "这是我的第一个函数"
}

#或者
my_function(){
	echo "这是我第一个函数的另一种写法"
}
~~~



##### 示例

~~~shell
#!bin/bash

#这是一个注释

current_date=$(date)

echo "当前日期为：$current_date"
~~~



#### 可执行权限

> 使用chmod命令，可以轻松做到



#### 脚本文件的位置

> 为了能够运行脚本，必须显示指定脚本文件的路径

例如：/tmp/helloworld.sh



脚本的理想位置：~/bin

该目录是存放个人使用脚本的理想位置



































